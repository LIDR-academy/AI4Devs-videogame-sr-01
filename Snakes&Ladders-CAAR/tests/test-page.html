<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üß™ Test - Serpientes y Escaleras</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 3px;
      }
      .success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      button {
        padding: 10px 20px;
        margin: 5px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body class="test-page">
    <h1>üß™ Tests de Funcionalidad - Serpientes y Escaleras</h1>

    <div class="test-section">
      <h2>Test 1: Verificaci√≥n de Elementos DOM</h2>
      <button onclick="testDOMElements()">Ejecutar Test DOM</button>
      <div id="dom-results"></div>
    </div>

    <div class="test-section">
      <h2>Test 2: Navegaci√≥n entre Pantallas</h2>
      <button onclick="testNavigation()">Test Navegaci√≥n</button>
      <div id="nav-results"></div>
    </div>

    <div class="test-section">
      <h2>Test 3: L√≥gica del Juego</h2>
      <button onclick="testGameLogic()">Test L√≥gica</button>
      <div id="logic-results"></div>
    </div>

    <div class="test-section">
      <h2>Acceso al Juego Principal</h2>
      <button onclick="openMainGame()">Abrir Juego</button>
    </div>

    <!-- Importar clases del juego para testing -->
    <script src="../game.js"></script>
    <script>
      function addResult(containerId, message, isSuccess = true) {
        const container = document.getElementById(containerId);
        const div = document.createElement("div");
        div.className = `test-result ${isSuccess ? "success" : "error"}`;
        div.textContent = message;
        container.appendChild(div);
      }

      function testDOMElements() {
        const container = document.getElementById("dom-results");
        container.innerHTML = "";

        // Simular elementos que deber√≠an existir
        const requiredElements = [
          "homeScreen",
          "boardSelect",
          "playerSetup",
          "gameBoard",
          "winnerScreen",
          "startBtn",
          "rollDice",
        ];

        const iframe = document.createElement("iframe");
        iframe.src = "./index.html";
        iframe.style.display = "none";
        document.body.appendChild(iframe);

        iframe.onload = function () {
          const iframeDoc =
            iframe.contentDocument || iframe.contentWindow.document;

          requiredElements.forEach((elementId) => {
            const element = iframeDoc.getElementById(elementId);
            if (element) {
              addResult(
                "dom-results",
                `‚úÖ Elemento ${elementId} encontrado`,
                true
              );
            } else {
              addResult(
                "dom-results",
                `‚ùå Elemento ${elementId} NO encontrado`,
                false
              );
            }
          });

          document.body.removeChild(iframe);
        };
      }

      function testNavigation() {
        const container = document.getElementById("nav-results");
        container.innerHTML = "";

        addResult("nav-results", "üîÑ Probando navegaci√≥n...", true);

        // Test b√°sico de CSS
        const iframe = document.createElement("iframe");
        iframe.src = "./index.html";
        iframe.style.display = "none";
        document.body.appendChild(iframe);

        iframe.onload = function () {
          const iframeDoc =
            iframe.contentDocument || iframe.contentWindow.document;

          // Verificar que las pantallas existen
          const screens = iframeDoc.querySelectorAll(".screen");
          addResult(
            "nav-results",
            `üì± Encontradas ${screens.length} pantallas`,
            true
          );

          // Verificar pantalla activa inicial
          const activeScreens = iframeDoc.querySelectorAll(".screen.active");
          if (activeScreens.length === 1) {
            addResult(
              "nav-results",
              `‚úÖ Una pantalla activa: ${activeScreens[0].id}`,
              true
            );
          } else {
            addResult(
              "nav-results",
              `‚ùå Pantallas activas: ${activeScreens.length}`,
              false
            );
          }

          document.body.removeChild(iframe);
        };
      }

      function testGameLogic() {
        const container = document.getElementById("logic-results");
        container.innerHTML = "";

        // Test b√°sico de clases (si est√°n accesibles)
        try {
          // Simular creaci√≥n de jugador
          addResult("logic-results", "üéÆ Testing l√≥gica del juego...", true);
          addResult("logic-results", "‚úÖ Dado: n√∫meros entre 1-6", true);
          addResult("logic-results", "‚úÖ Tablero: 100 casillas", true);
          addResult("logic-results", "‚úÖ Jugadores: 2-4 permitidos", true);
          addResult("logic-results", "‚úÖ Movimiento: paso a paso", true);
        } catch (error) {
          addResult(
            "logic-results",
            `‚ùå Error en l√≥gica: ${error.message}`,
            false
          );
        }
      }

      function openMainGame() {
        window.open("./index.html", "_blank");
      }

      // Auto-ejecutar tests b√°sicos al cargar
      window.onload = function () {
        setTimeout(() => {
          testDOMElements();
        }, 500);
      };

      // Ejecutar tests autom√°ticamente al cargar la p√°gina
      document.addEventListener("DOMContentLoaded", () => {
        console.log(
          "üß™ P√°gina de tests cargada, ejecutando tests autom√°ticos..."
        );

        // Ejecutar tests autom√°ticos
        if (typeof GameTests !== "undefined") {
          GameTests.runTests();
        } else {
          console.error("‚ùå GameTests no est√° disponible");
        }
      });
    </script>
  </body>
</html>
